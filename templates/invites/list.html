{% extends "base.html" %}
{% block title %}Invites{% endblock %}
{% block content %}
<div class="card">
  <div style="display:flex; justify-content:space-between; gap:12px; flex-wrap:wrap;">
    <div>
      <h1 style="margin:0;">Organisation Invites</h1>
      <p style="margin:6px 0 0; color:#6b7280;">Create invite codes for staff to join your organisation.</p>
    </div>
    <a class="btn" href="/invites/create">+ Create Invite</a>
  </div>
</div>

<div class="card">
  <table>
    <thead>
      <tr>
        <th>Code</th><th>Role</th><th>Uses</th><th>Expires</th><th>Status</th><th>Action</th>
      </tr>
    </thead>
    <tbody>
      {% for i in invites %}
      <tr>
        <td style="font-family:monospace;">{{ i.code }}</td>
        <td>{{ i.role }}</td>
        <td>{{ i.uses }}/{{ i.max_uses }}</td>
        <td>{{ i.expires_at or "â€”" }}</td>
        <td>{{ "Active" if i.is_active else "Disabled" }}</td>
        <td>
          <form method="post" action="/invites/{{i.id}}/toggle">
            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
            <button type="submit">{{ "Disable" if i.is_active else "Enable" }}</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}